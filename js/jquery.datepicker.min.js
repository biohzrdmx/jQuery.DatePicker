/**
* jQuery DatePicker
* @author biohzrdmx <github.com/biohzrdmx>
* @version 1.0
* @requires jQuery 1.8+
* @license MIT
*/
;!function(e){e.datePicker={strings:{monthsFull:["January","Febraury","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],messageLocked:"The day you have just selected is not available"},defaults:{formatDate:function(a){return e.datePicker.utils.pad(a.getDate(),2)+"/"+e.datePicker.utils.pad(a.getMonth()+1,2)+"/"+a.getFullYear()},parseDate:function(e){var a=new Date,t=e.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);return t&&4==t.length&&(a=new Date(t[3],t[2]-1,t[1])),a},selectDate:function(e){return!0},limitCenturies:!0,closeOnPick:!0,appendTo:null},utils:{firstDay:function(e,a){return new Date(e,a,1).getDay()},daysInMonth:function(e,a){return new Date(e,++a,0).getDate()},buildDecadePicker:function(a,t){e.datePicker;var n=e('<div class="decades"></div>'),r=100*Math.floor(a/100)-10,d=e.datePicker.defaults.limitCenturies,s='<div class="row header"><a href="#" class="prev'+(d&&r<1900?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="century" data-century="'+(r+10)+'">'+(r+1)+"-"+(r+100)+'</a><a href="#" class="next'+(d&&1990==r?" disabled":"")+'"><span class="arrow"></span></a></div>';n.append(s);for(var l=0,c="",i=0,o=0;o<3;o++){for(var u=e('<div class="row"></div>'),h=0;h<4;h++)if(l=h+4*o,c=0==l?" grayed prev":11==l?" grayed next":"",i=r+10*l,d&&(i<1900||i>2090)){f=e('<a href="" class="cell large double decade blank">&nbsp;</a>');u.append(f)}else{t>=i&&t<=i+9&&(c+=" selected");var f=e('<a href="#" data-year="'+i+'" class="cell large double decade'+c+'"><span>'+i+"- "+(i+9)+"</span></a>");u.append(f)}n.append(u)}return n},buildYearPicker:function(a,t){e.datePicker;var n=e('<div class="years"></div>'),r=10*Math.floor(a/10)-1,d=e.datePicker.defaults.limitCenturies,s='<div class="row header"><a href="#" class="prev'+(d&&1899==r?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="decade" data-decade="'+(r+1)+'">'+(r+1)+"-"+(r+10)+'</a><a href="#" class="next'+(d&&2089==r?" disabled":"")+'"><span class="arrow"></span></a></div>';n.append(s);for(var l=0,c="",i=0,o=0;o<3;o++){for(var u=e('<div class="row"></div>'),h=0;h<4;h++)if(l=h+4*o,c=0==l?" grayed prev":11==l?" grayed next":"",i=r+l,d&&(i<1900||i>2099)){f=e('<a href="" class="cell large year blank">&nbsp;</a>');u.append(f)}else{i==t&&(c+=" selected");var f=e('<a href="#" data-year="'+i+'" class="cell large year'+c+'">'+i+"</a>");u.append(f)}n.append(u)}return n},buildMonthPicker:function(a,t){var n=e.datePicker,r=e('<div class="months"></div>'),d=e.datePicker.defaults.limitCenturies,s='<div class="row header"><a href="#" class="prev'+(d&&1900==a?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="year" data-year="'+a+'">'+a+'</a><a href="#" class="next'+(d&&2099==a?" disabled":"")+'"><span class="arrow"></span></a></div>';r.append(s);for(var l=0,c="",i=0;i<3;i++){for(var o=e('<div class="row"></div>'),u=0;u<4;u++){c="",(l=u+4*i)==t&&(c+=" selected");var h=e('<a href="#" data-year="'+a+'" data-month="'+l+'" class="cell large month'+c+'">'+n.strings.monthsShort[l]+"</a>");o.append(h)}r.append(o)}return r},buildCalendar:function(a,t,n){var r=e.datePicker,d=e('<div class="calendar"></div>'),s=new Date,a=a||s.getFullYear(),t=t>=0?t:s.getMonth(),l=new Date(a,t,1),c=e.datePicker.defaults.limitCenturies;l.setDate(l.getDate()-1);var i=l.getDate(),o=this.daysInMonth(a,t),u=this.firstDay(a,t),h=1-u;0==u&&(h-=7);var f='<div class="row header"><a href="#" class="prev'+(c&&1900==a&&0==t?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="month" data-year="'+a+'" data-month="'+t+'">'+r.strings.monthsFull[t]+" "+a+'</a><a href="#" class="next'+(c&&2099==a&&11==t?" disabled":"")+'"><span class="arrow"></span></a></div>';d.append(f);for(var p=e('<div class="row days"></div>'),v=0;v<7;v++)p.append('<div class="cell">'+r.strings.daysShort[v]+"</div>");d.append(p);for(v=0;v<6;v++){for(var m=e('<div class="row week"></div>'),y=0;y<7;y++){var k=h<=0?i+h:h>o?h-o:h,g=h<=0?" grayed prev":h>o?" grayed next":"";c&&(1900==a&&0==t&&h<1||2099==a&&11==t&&h>o)?(m.append('<a href="#" class="cell day blank">&nbsp;</a>'),h++):(h==s.getDate()&&t==s.getMonth()&&a==s.getFullYear()&&(g+=" today"),h==n.getDate()&&t==n.getMonth()&&a==n.getFullYear()&&(g+=" selected"),m.append('<a href="#" class="cell day'+g+'">'+k+"</a>"),h++)}d.append(m)}return d},pad:function(e,a){for(var t=e+"";t.length<a;)t="0"+t;return t}},show:function(a){var t=e.extend(!0,{},e.datePicker.defaults,a),n=null,r=new Date;t.element&&("string"==typeof t.element&&(t.element=e(t.element)),r=t.parseDate(t.element.val()));var d={day:r.getDate(),month:r.getMonth(),year:r.getFullYear(),decade:r.getFullYear()},s=e.datePicker.utils.buildCalendar(d.year,d.month,r),l=e.datePicker.utils.buildMonthPicker(d.year,d.month),c=e.datePicker.utils.buildYearPicker(d.year,d.year),i=e.datePicker.utils.buildDecadePicker(d.year,d.year);if((n=e('<div class="datepicker"><span class="tip"></span></div>')).append(s),n.append(l),n.append(c),n.append(i),e.datePicker.hide(!0),t.element&&!t.appendTo){var o=t.element.offset();n.css({left:o.left+"px",top:o.top+t.element.outerHeight(!0)+15+"px"})}n.hide(),e(t.appendTo||"body").append(n),n.fadeIn(150),n.on("click",".calendar .day",function(a){a.preventDefault();var n=e(this),s=n.closest(".calendar");if(!n.hasClass("blank")){s.find(".selected").removeClass("selected"),n.addClass("selected"),d.day=parseInt(n.text())||1,n.hasClass("grayed")&&(n.hasClass("prev")?(d.year-=0==d.month?1:0,d.month=d.month>0?d.month-1:11):n.hasClass("next")&&(d.year+=11==d.month?1:0,d.month=d.month<11?d.month+1:0));var l=new Date;if(l.setFullYear(d.year,d.month,d.day),t.selectDate(l)){r.setFullYear(d.year,d.month,d.day);var c=t.formatDate(r);e(t.element).val(c),t.closeOnPick&&!n.hasClass("grayed")&&e.datePicker.hide()}}}),n.on("click",".calendar .month",function(a){a.preventDefault();var t=e(this).closest(".calendar"),r=n.children(".months"),s=e.datePicker.utils.buildMonthPicker(d.year,d.month);r.replaceWith(s),r=s,t.fadeOut(150,function(){r.fadeIn(150)})}),n.on("click",".calendar .prev",function(a){a.preventDefault();var t=e(this),n=t.closest(".calendar"),s=n.find(".month"),l=s.data("month"),c=s.data("year");t.hasClass("disabled")||((l-=1)<0&&(l=11,c--),d.month=l,d.year=c,replacement=e.datePicker.utils.buildCalendar(c,l,r),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".calendar .next",function(a){a.preventDefault();var t=e(this),n=t.closest(".calendar"),s=n.find(".month"),l=s.data("month"),c=s.data("year");t.hasClass("disabled")||((l+=1)>11&&(l=0,c++),d.month=l,d.year=c,replacement=e.datePicker.utils.buildCalendar(c,l,r),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".months .month",function(a){a.preventDefault();var t=e(this),s=t.closest(".months"),l=t.data("month"),c=t.data("year"),i=n.children(".calendar"),o=null;t.hasClass("blank")||(s.find(".selected").removeClass("selected"),t.addClass("selected"),d.month=l,(o=e.datePicker.utils.buildCalendar(c,l,r)).hide(),i.replaceWith(o),s.fadeOut(150,function(){o.fadeIn(150)}))}),n.on("click",".months .prev",function(a){a.preventDefault();var t=e(this),n=t.closest(".months"),r=n.find(".year").data("year");t.hasClass("disabled")||(r-=1,d.year=r,replacement=e.datePicker.utils.buildMonthPicker(r,d.month),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".months .next",function(a){a.preventDefault();var t=e(this),n=t.closest(".months"),r=n.find(".year").data("year");t.hasClass("disabled")||(r+=1,d.year=r,replacement=e.datePicker.utils.buildMonthPicker(r,d.month),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".months .year",function(a){a.preventDefault();var t=e(this).closest(".months"),r=n.children(".years"),s=e.datePicker.utils.buildYearPicker(d.decade,d.year);r.replaceWith(s),r=s,t.fadeOut(150,function(){r.fadeIn(150)})}),n.on("click",".years .year",function(a){a.preventDefault();var t=e(this),r=t.closest(".years"),s=t.data("year"),l=n.children(".months"),c=null;t.hasClass("blank")||t.hasClass("next")||t.hasClass("prev")||(r.find(".selected").removeClass("selected"),t.addClass("selected"),d.year=s,d.decade=s,(c=e.datePicker.utils.buildMonthPicker(s,d.month)).hide(),l.replaceWith(c),r.fadeOut(150,function(){c.fadeIn(150)}))}),n.on("click",".years .prev",function(a){a.preventDefault();var t=e(this),n=t.closest(".years"),r=n.find(".decade").data("decade");t.hasClass("disabled")||(r-=10,d.decade=r,replacement=e.datePicker.utils.buildYearPicker(r,d.year),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".years .next",function(a){a.preventDefault();var t=e(this),n=t.closest(".years"),r=n.find(".decade").data("decade");t.hasClass("disabled")||(r+=10,d.decade=r,replacement=e.datePicker.utils.buildYearPicker(r,d.year),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".years .decade",function(a){a.preventDefault();var t=e(this).closest(".years"),r=n.children(".decades");t.fadeOut(150,function(){r.fadeIn(150)})}),n.on("click",".decades .decade",function(a){a.preventDefault();var t=e(this),r=t.data("year"),s=t.closest(".decades"),l=n.children(".years"),c=null;t.hasClass("blank")||t.hasClass("next")||t.hasClass("prev")||(s.find(".selected").removeClass("selected"),t.addClass("selected"),(c=e.datePicker.utils.buildYearPicker(r,d.year)).hide(),l.replaceWith(c),s.fadeOut(150,function(){c.fadeIn(150)}))}),n.on("click",".decades .prev",function(a){a.preventDefault();var t=e(this),n=t.closest(".decades"),r=n.find(".century").data("century");t.hasClass("disabled")||(r-=100,replacement=e.datePicker.utils.buildDecadePicker(r,d.decade),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".decades .next",function(a){a.preventDefault();var t=e(this),n=t.closest(".decades"),r=n.find(".century").data("century");t.hasClass("disabled")||(r+=100,replacement=e.datePicker.utils.buildDecadePicker(r,d.decade),replacement.hide(),n.after(replacement),n.fadeOut(150,function(){n.detach(),replacement.fadeIn(150)}))}),n.on("click",".decades .century",function(e){e.preventDefault()}),e(document).on("mouseup",function(a){n.is(a.target)||0!==n.has(a.target).length||(e(document).off("mouseup"),e.datePicker.hide())})},hide:function(a){var a=a||!1,t=e(".datepicker");a?t.remove():t.fadeOut(150,t.remove)}},e.fn.datePicker=function(a){if(!this.length)return this;e.extend(!0,{},e.datePicker.defaults,a);return this.each(function(){var a=e(this),t=a.parent().find("[data-toggle=datepicker]"),n=a.data("locked");n=!!n&&n.split(";");var r=function(a){var t=!0,r=e.datePicker.utils.pad(a.getDate(),2)+"/"+e.datePicker.utils.pad(a.getMonth()+1,2)+"/"+a.getFullYear();if(n.length)for(var d=0;d<n.length;d++)if(n[d]==r){"function"==typeof e.alert?e.alert=e.datePicker.strings.messageLocked:alert(e.datePicker.strings.messageLocked),t=!1;break}return t};t.length?t.on("click",function(t){t.preventDefault(),e(".datepicker:visible").length?e.datePicker.hide():e.datePicker.show({element:a,selectDate:r})}):a.on("click",function(){e.datePicker.show({element:a,selectDate:r})})}),this},e("[data-select=datepicker]").each(function(){e(this).datePicker()})}(jQuery);